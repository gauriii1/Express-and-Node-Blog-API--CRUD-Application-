<!DOCTYPE html>
<html>
<head>
  <title>Blog API Interface</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, textarea, button { margin: 5px 0; width: 100%; padding: 8px; }
    .section { border: 1px solid #ccc; padding: 10px; margin-bottom: 20px; }
  </style>
</head>
<body>

  <h1>Blog API Interface</h1>

  <!-- Users Section -->
  <div class="section">
    <h2>Users</h2>
    <button onclick="getUsers()">Load Users</button>
    <ul id="usersList"></ul>
  </div>

  <!-- Posts Section -->
  <div class="section">
    <h2>Posts</h2>
    <button onclick="getPosts()">Load Posts</button>
    <ul id="postsList"></ul>

    <h3>Create Post</h3>
    <input type="text" id="postTitle" placeholder="Title">
    <textarea id="postContent" placeholder="Content"></textarea>
    <input type="number" id="postUserId" placeholder="User ID">
    <button onclick="createPost()">Add Post</button>
  </div>

  <!-- Comments Section -->
  <div class="section">
    <h2>Comments</h2>
    <button onclick="getComments()">Load Comments</button>
    <ul id="commentsList"></ul>

    <h3>Add Comment</h3>
    <input type="number" id="commentPostId" placeholder="Post ID">
    <input type="number" id="commentUserId" placeholder="User ID">
    <textarea id="commentText" placeholder="Comment text"></textarea>
    <button onclick="createComment()">Add Comment</button>
  </div>

  <script>
    const baseUrl = 'http://localhost:3000';

    // Users
    async function getUsers() {
      const res = await fetch(`${baseUrl}/users`);
      const data = await res.json();
      const list = document.getElementById('usersList');
      list.innerHTML = '';
      data.forEach(u => list.innerHTML += `<li>${u.id}: ${u.name}</li>`);
    }

    // Posts
    async function getPosts() {
      const res = await fetch(`${baseUrl}/posts`);
      const data = await res.json();
      const list = document.getElementById('postsList');
      list.innerHTML = '';
      data.forEach(p => list.innerHTML += `<li>${p.id}: ${p.title} (User ${p.userId})</li>`);
    }

    async function createPost() {
      const title = document.getElementById('postTitle').value;
      const content = document.getElementById('postContent').value;
      const userId = parseInt(document.getElementById('postUserId').value);

      const res = await fetch(`${baseUrl}/posts`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title, content, userId })
      });

      if(res.ok) {
        alert('Post added!');
        getPosts();
      } else {
        alert('Error adding post');
      }
    }

    // Comments
    async function getComments() {
      const res = await fetch(`${baseUrl}/comments`);
      const data = await res.json();
      const list = document.getElementById('commentsList');
      list.innerHTML = '';
      data.forEach(c => list.innerHTML += `<li>${c.id}: Post ${c.postId}, User ${c.userId} - ${c.text}</li>`);
    }

    async function createComment() {
      const postId = parseInt(document.getElementById('commentPostId').value);
      const userId = parseInt(document.getElementById('commentUserId').value);
      const text = document.getElementById('commentText').value;

      const res = await fetch(`${baseUrl}/comments`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ postId, userId, text })
      });

      if(res.ok) {
        alert('Comment added!');
        getComments();
      } else {
        alert('Error adding comment');
      }
    }
  </script>
</body>
</html>
